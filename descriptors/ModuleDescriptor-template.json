{
  "id": "@artifactId@-@version@",
  "name": "Bulk operations API.",
  "provides": [
    {
      "id": "bulk-operations",
      "version": "1.0",
      "handlers": [
        {
          "methods": [ "POST" ],
          "pathPattern": "/bulk-operations/upload",
          "permissionsRequired": [ "bulk-operations.upload.item.post" ],
          "modulePermissions": [
            "data-export.job.item.post",
            "bulk-edit.item.post"
          ]
        },
        {
          "methods": [ "POST" ],
          "pathPattern": "/bulk-operations/{operationId}/content-update",
          "permissionsRequired": [ "bulk-operations.content-update.collection.post" ],
          "modulePermissions": [
          ]
        },
        {
          "methods": [ "GET" ],
          "pathPattern": "/bulk-operations/{operationId}/preview",
          "permissionsRequired": [ "bulk-operations.preview.item.get" ],
          "modulePermissions": [
            "addresstypes.item.get",
            "departments.item.get",
            "usergroups.item.get",
            "user-settings.custom-fields.collection.get",
            "okapi.proxy.tenants.modules.list",
            "inventory-storage.item-damaged-statuses.item.get",
            "inventory-storage.item-note-types.item.get",
            "inventory-storage.service-points.item.get",
            "users.item.get",
            "inventory-storage.instances.item.get",
            "inventory-storage.holdings-types.item.get",
            "inventory-storage.locations.item.get",
            "inventory-storage.call-number-types.item.get",
            "inventory-storage.electronic-access-relationships.item.get",
            "inventory-storage.holdings-note-types.item.get",
            "inventory-storage.ill-policies.item.get",
            "inventory-storage.holdings-sources.item.get",
            "inventory-storage.statistical-codes.item.get"
          ]
        },
        {
          "methods": [ "GET" ],
          "pathPattern": "/bulk-operations/{operationId}/preview/download",
          "permissionsRequired": [ "bulk-operations.preview.download.item.get" ],
          "modulePermissions": [
            "addresstypes.item.get",
            "departments.item.get",
            "usergroups.item.get",
            "user-settings.custom-fields.collection.get",
            "okapi.proxy.tenants.modules.list",
            "inventory-storage.item-damaged-statuses.item.get",
            "inventory-storage.item-note-types.item.get",
            "inventory-storage.service-points.item.get",
            "users.item.get",
            "inventory-storage.instances.item.get",
            "inventory-storage.holdings-types.item.get",
            "inventory-storage.locations.item.get",
            "inventory-storage.call-number-types.item.get",
            "inventory-storage.electronic-access-relationships.item.get",
            "inventory-storage.holdings-note-types.item.get",
            "inventory-storage.ill-policies.item.get",
            "inventory-storage.holdings-sources.item.get",
            "inventory-storage.statistical-codes.item.get"
          ]
        },
        {
          "methods": [ "POST" ],
          "pathPattern": "/bulk-operations/{operationId}/start",
          "permissionsRequired": [ "bulk-operations.start.item.post" ],
          "modulePermissions": [
            "inventory-storage.holdings.item.put",
            "inventory.items.item.put",
            "users.item.put"
          ]
        },
        {
          "methods": [ "GET" ],
          "pathPattern": "/bulk-operations/{operationId}/errors",
          "permissionsRequired": [ "bulk-operations.errors.collection.get" ],
          "modulePermissions": [
            "bulk-edit.errors.collection.get"
          ]
        },
        {
          "methods": [ "GET" ],
          "pathPattern": "/bulk-operations/{operationId}/errors/download",
          "permissionsRequired": [ "bulk-operations.errors.download.item.get" ],
          "modulePermissions": [
            "bulk-edit.errors.collection.get"
          ]
        },
        {
          "methods": [ "GET" ],
          "pathPattern": "/bulk-operations",
          "permissionsRequired": [ "bulk-operations.collection.get" ],
          "modulePermissions": [
          ]
        },
        {
          "methods": [ "GET" ],
          "pathPattern": "/bulk-operations/{operationId}",
          "permissionsRequired": [ "bulk-operations.item.get" ],
          "modulePermissions": [
          ]
        }
      ]
    },
    {
      "id": "_tenant",
      "version": "1.2",
      "interfaceType": "system",
      "handlers": [
        {
          "methods": ["POST"],
          "pathPattern": "/_/tenant"
        }, {
          "methods": ["DELETE"],
          "pathPattern": "/_/tenant"
        }
      ]
    }
  ],
  "permissionSets": [
    {
      "permissionName" : "bulk-operations.upload.item.post",
      "displayName" : "upload identifiers list",
      "description" : "Upload list of identifiers"
    },
    {
      "permissionName" : "bulk-operations.content-update.collection.post",
      "displayName" : "upload content update collection",
      "description" : "Upload collection of  content updates"
    },
    {
      "permissionName" : "bulk-operations.preview.item.get",
      "displayName" : "get Bulk Operation preview",
      "description" : "Get Bulk Operation preview"
    },
    {
      "permissionName" : "bulk-operations.preview.download.item.get",
      "displayName" : "download Bulk Operation preview",
      "description" : "Download Bulk Operation preview"
    },
    {
      "permissionName" : "bulk-operations.start.item.post",
      "displayName" : "start Bulk Operation",
      "description" : "Start Bulk Operation"
    },
    {
      "permissionName" : "bulk-operations.errors.collection.get",
      "displayName" : "get errors collection for preview",
      "description" : "Get errors collection for preview"
    },
    {
      "permissionName": "bulk-operations.errors.download.item.get",
      "displayName": "download errors",
      "description": "Download errors"
    },
    {
      "permissionName" : "bulk-operations.collection.get",
      "displayName" : "get list of Bulk Operations",
      "description" : "Get list of Bulk Operations"
    },
    {
      "permissionName" : "bulk-operations.item.get",
      "displayName" : "get Bulk Operation by id",
      "description" : "Get Bulk Operation By Id"
    },
    {
      "permissionName" : "bulk-operations.all",
      "displayName" : "bulk-operations all",
      "description" : "All permissions for bulk-operations module",
      "subPermissions" : [
        "bulk-operations.upload.item.post",
        "bulk-operations.content-update.collection.post",
        "bulk-operations.preview.item.get",
        "bulk-operations.preview.download.item.get",
        "bulk-operations.start.item.post",
        "bulk-operations.errors.collection.get",
        "bulk-operations.errors.download.item.get",
        "bulk-operations.collection.get",
        "bulk-operations.item.get"
      ]
    }
  ],
  "requires": [
    {
      "id": "login",
      "version": "5.0 6.0 7.0"
    },
    {
      "id": "holdings-storage",
      "version": "6.0"
    },
    {
      "id": "instance-storage",
      "version": "9.0"
    },
    {
      "id": "inventory",
      "version": "12.0"
    },
    {
      "id": "locations",
      "version": "3.0"
    },
    {
      "id": "electronic-access-relationships",
      "version": "1.0"
    },
    {
      "id": "statistical-codes",
      "version": "1.0"
    },
    {
      "id": "ill-policies",
      "version": "1.0"
    },
    {
      "id": "holdings-types",
      "version": "1.0"
    },
    {
      "id": "call-number-types",
      "version": "1.0"
    },
    {
      "id": "holdings-sources",
      "version": "1.0"
    },
    {
      "id": "holdings-note-types",
      "version": "1.0"
    },
    {
      "id": "item-note-types",
      "version": "1.0"
    },
    {
      "id": "item-damaged-statuses",
      "version": "1.0"
    },
    {
      "id": "service-points",
      "version": "3.3"
    },
    {
      "id": "service-points",
      "version": "3.3"
    },
    {
      "id": "users",
      "version": "16.0"
    },
    {
      "id": "custom-fields",
      "version": "2.0"
    },
    {
      "id": "bulk-edit",
      "version": "3.0"
    },
    {
      "id": "data-export-spring",
      "version": "1.0"
    }
  ],
  "launchDescriptor": {
    "dockerImage": "@artifactId@:@version@",
    "dockerPull": false,
    "dockerArgs": {
      "HostConfig": {
        "Memory": 357913941,
        "PortBindings": { "8081/tcp": [ { "HostPort": "%p" } ] }
      }
    },
    "env": [
      { "name": "JAVA_OPTIONS",
        "value": "-XX:MaxRAMPercentage=66.0"
      },
      { "name": "DB_HOST", "value": "postgres" },
      { "name": "DB_PORT", "value": "5432" },
      { "name": "DB_USERNAME", "value": "folio_admin" },
      { "name": "DB_PASSWORD", "value": "folio_admin" },
      { "name": "DB_DATABASE", "value": "okapi_modules" },
      { "name": "DB_QUERYTIMEOUT", "value": "60000" },
      { "name": "DB_CHARSET", "value": "UTF-8" },
      { "name": "DB_MAXPOOLSIZE", "value": "5" },
      {"name": "KAFKA_HOST", "value": "10.0.2.15"},
      {"name": "KAFKA_PORT", "value": "9092"},
      {"name": "S3_URL", "value": "http://127.0.0.1:9000/"},
      {"name": "S3_REGION", "value": ""},
      {"name": "S3_BUCKET", "value": "test-bucket2"},
      {"name": "S3_ACCESS_KEY_ID", "value": "AKIAIOSFODNN7EXAMPLE"},
      {"name": "S3_SECRET_ACCESS_KEY", "value": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"},
      {"name": "S3_IS_AWS", "value": false},
      {"name": "ENV", "value": "folio"},
      {"name": "MAX_UPLOADING_RETRIES", "value": "50"}
    ]
  }
}
